---
import { Check, ArrowRight } from "@lucide/astro";

interface Props {
    title: string;
    subtitle: string;
    monthlyPrice: string;
    yearlyPrice: string;
    features: string[];
    buttonText?: string;
    isHighlighted?: boolean;
}

const {
    title,
    subtitle,
    monthlyPrice,
    yearlyPrice,
    features,
    buttonText = "Get Started",
    isHighlighted = false,
} = Astro.props;
---

<div
    class:list={[
        "pricing-card flex flex-col gap-6 p-4 border rounded-2xl group hover:shadow-md duration-300",
        isHighlighted
            ? "border-[var(--main-theme-color)] shadow-lg scale-100 md:scale-105 hover:shadow-[var(--main-theme-color)]"
            : "border-gray-200",
    ]}
>
    <div
        class="pricing-card-header flex flex-col gap-2 duration-300 bg-transparent group-hover:bg-gray-100 p-3 rounded-xl"
    >
        <h3 class="pricing-card-title text-4xl font-semibold">
            {title}
        </h3>
        <p class="pricing-card-subtitle text-xl">
            {subtitle}
        </p>
        <div class="pricing-card-price h-12 flex items-baseline">
            <div class="price-monthly flex items-baseline">
                <span
                    class="pricing-card-price-value text-4xl font-semibold text-[var(--main-theme-color)]"
                >
                    {monthlyPrice}
                </span>
                <span
                    class="pricing-card-price-period text-sm text-gray-500 ml-1"
                >
                    /month
                </span>
            </div>
            <div class="price-yearly flex items-baseline">
                <span
                    class="pricing-card-price-value js-price-value text-4xl font-semibold text-[var(--main-theme-color)]"
                    data-price-value={yearlyPrice.replace(/[^0-9.]/g, "")}
                >
                    {yearlyPrice}
                </span>
                <span
                    class="pricing-card-price-period text-sm text-gray-500 ml-1"
                >
                    /year
                </span>
            </div>
        </div>
    </div>
    <div class="pricing-card-body p-3">
        <ul class="pricing-card-list flex flex-col gap-3 text-lg">
            {
                features.map((feature) => (
                    <li class="pricing-card-list-item flex items-center gap-2">
                        <Check class="pricing-card-list-item-icon" />
                        {feature}
                    </li>
                ))
            }
        </ul>
    </div>
    <div class="pricing-card-footer p-3">
        <button
            class="pricing-card-button flex items-center justify-center w-full gap-2 duration-300 px-6 py-3 rounded-xl bg-[var(--main-theme-color)] text-white cursor-pointer transition-all"
        >
            {buttonText}
            <ArrowRight />
        </button>
    </div>
</div>

<style>
    .price-monthly,
    .price-yearly {
        display: none;
    }

    :global([data-billing="monthly"]) .price-monthly {
        display: flex;
    }

    :global([data-billing="yearly"]) .price-yearly {
        display: flex;
    }

    .pricing-card-list-item {
        position: relative;
        padding-bottom: 1rem;
    }

    .pricing-card-list-item::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        height: 2px;
        background: linear-gradient(
            to right,
            transparent,
            var(--main-theme-color),
            transparent
        );
    }

    .pricing-card-list-item-icon {
        width: 1rem;
    }
</style>

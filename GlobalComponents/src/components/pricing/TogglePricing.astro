---
import PricingCard from "./PricingCard.astro";

const pricingPlans = [
    {
        title: "Basic",
        subtitle: "For small businesses",
        monthlyPrice: "$19",
        yearlyPrice: "$190",
        features: ["10 users", "20GB storage", "100GB bandwidth"],
    },
    {
        title: "Premium",
        subtitle: "For growing teams",
        monthlyPrice: "$49",
        yearlyPrice: "$490",
        features: ["50 users", "100GB storage", "500GB bandwidth"],
        isHighlighted: true,
    },
    {
        title: "Enterprise",
        subtitle: "For large organizations",
        monthlyPrice: "$99",
        yearlyPrice: "$990",
        features: ["Unlimited users", "500GB storage", "Unlimited bandwidth"],
    },
];
---

<section class="section pricing-section py-10 md:20">
    <div class="container mx-auto px-4">
        <div class="content-wrapper flex flex-col gap-12">
            <div class="heading-content flex flex-col gap-6 text-center">
                <h2 class="section-heading text-5xl font-bold">Pricing</h2>
                <p class="section-subheading text-xl text-gray-600">
                    Choose the right plan for your business
                </p>

                <!-- Toggle UI -->
                <div class="flex items-center justify-center gap-4 mt-4">
                    <span
                        id="monthly-label"
                        class="text-lg font-medium text-[var(--main-theme-color)]"
                        >Monthly</span
                    >
                    <button
                        id="billing-toggle"
                        class="relative w-14 h-8 bg-gray-200 rounded-full p-1 transition-colors duration-300 focus:outline-none"
                        aria-label="Toggle billing cycle"
                        data-billing="monthly"
                    >
                        <div
                            class="dot w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300"
                        >
                        </div>
                    </button>
                    <span
                        id="yearly-label"
                        class="text-lg font-medium text-gray-500">Yearly</span
                    >
                </div>
            </div>

            <div
                class="pricing-card-content"
                id="pricing-wrapper"
                data-billing="monthly"
            >
                <div
                    class="pricing-cards-wrapper max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"
                >
                    {pricingPlans.map((plan) => <PricingCard {...plan} />)}
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    const toggle = document.getElementById("billing-toggle");
    const wrapper = document.getElementById("pricing-wrapper");
    const monthlyLabel = document.getElementById("monthly-label");
    const yearlyLabel = document.getElementById("yearly-label");
    const dot = toggle?.querySelector(".dot");

    toggle?.addEventListener("click", () => {
        const currentBilling = toggle.getAttribute("data-billing");
        const nextBilling = currentBilling === "monthly" ? "yearly" : "monthly";

        // Update attributes
        toggle.setAttribute("data-billing", nextBilling);
        wrapper?.setAttribute("data-billing", nextBilling);

        // Update dot position
        if (nextBilling === "yearly") {
            dot?.classList.add("translate-x-6");
            toggle.classList.replace(
                "bg-gray-200",
                "bg-[var(--main-theme-color)]",
            );
            yearlyLabel?.classList.replace(
                "text-gray-500",
                "text-[var(--main-theme-color)]",
            );
            monthlyLabel?.classList.replace(
                "text-[var(--main-theme-color)]",
                "text-gray-500",
            );
        } else {
            dot?.classList.remove("translate-x-6");
            toggle.classList.replace(
                "bg-[var(--main-theme-color)]",
                "bg-gray-200",
            );
            yearlyLabel?.classList.replace(
                "text-[var(--main-theme-color)]",
                "text-gray-500",
            );
            monthlyLabel?.classList.replace(
                "text-gray-500",
                "text-[var(--main-theme-color)]",
            );
        }
    });
</script>

<style>
    /* Add smooth scale transition for highlighted cards */
    :global(.pricing-card) {
        transition:
            transform 0.3s ease,
            box-shadow 0.3s ease;
    }
</style>
